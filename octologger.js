!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.octologger={})}(this,function(e){"use strict";var d={entry:0,scope:1},v="idle",g="interactive",h="completed",b="cancelled",E="failed",y={error:0,warn:1,info:2,verbose:3,debug:4,log:5,success:6},o={};for(var t in y)o[y[t]]=t;var l=/at\s+(?:([^\s]+)(?:.*?)\()?((?:http|file|\/)[^)]+:\d+)\)?/,a=/^(.*?)(?:\/<)*@(.*?)$/,u=/^()(https?:\/\/.+)/,i=/^(.*?):(\d+)(?::(\d+))?$/,c="<anonymous>";function s(e){if(null==e)return null;var t=e.match(l);if(null===t&&(t=e.match(a)||e.match(u)),t){var n=t[2].match(i),r={fn:void 0===t[1]?c:t[1].trim()||c,file:"",line:0,column:0};return n&&(r.file=n[1],r.line=parseInt(n[2],10)||0,r.column=parseInt(n[3],10)||0),r}return null}function r(e){if(null==e)return null;for(var t=e.trim().split("\n"),n=[],r=0;r<t.length;r++){var l=s(t[r]);null!==l&&n.push(l)}return n}var T=Function("return this")(),C="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:Date.now;function f(e,t){var n=e<10?"0"+e:e;return 1<t&&e<100&&(n="0"+n),n}function p(e,t){e[t].toString=function(){return"function "+t+"() { [native code] }"}}var n=/:([^;]+)/g;function m(n,r){return function(e){var t=o[e.level];return r(t,e,{base:n.level[t],label:n.label[t]})}}var I=m({level:{error:"[31m",warn:"[33m",log:"[0m",info:"[34m",success:"[34m",verbose:"[35m",debug:"[35m"},label:{error:"[4m",warn:"[4m",log:"[4m",info:"[4m",success:"[4m",verbose:"[4m",debug:"[4m"}},function(e,t,n){var r=[];return null!==t.badge&&r.push(t.badge),null!==t.label&&r.push(""+n.base+n.label+t.label+"[0m"),null!==t.message&&r.push(""+n.base+t.message),null!==t.detail&&r.push(t.detail),null!==t.meta&&r.push(t.meta.file+":"+t.meta.line+":"+t.meta.column+" ("+t.meta.fn+")"),r.push("[0m"),r}),L="text-decoration: underline; font-weight: bold;";function w(e){return e.replace(n,": inherit")}var x=m({level:{error:"color: red;",warn:"color: orange;",log:"color: #333;",success:"color: #1aaa55;",info:"color: dodgerblue;",verbose:"color: magenta;",debug:"color: #8b1fdd;"},label:{error:L,warn:L,log:L,info:L,success:L,verbose:L,debug:L}},function(e,t,n){var r,l,o=[],a=[];if(null!==t.ts&&(o.push("%c[%s] "),a.push(n.base,(r=t.ts,f((l=r/1e3)/60%24|0)+":"+f(l%60|0)+"."+f(r%1e3|0,2)))),null!==t.badge&&(o.push("%s"),a.push(t.badge)),null!==t.label&&(o.push("%c%s%c "),a.push(n.label+n.base,t.label,w(n.label))),null!==t.message&&(o.push("%c%s "),a.push(n.base,t.message)),null!=t.detail){var u=t.detail,i=u.length;if(null===t.message&&0<=i&&0 in u){o.push("%c"),a.push(n.base);for(var c=0;c<i;c++){var s=u[c];o.push(("string"==typeof s?"%s":"%o")+" "),a.push(s)}}else o.push("%o "),a.push(u)}return null!==t.meta&&(o.push("%s"),a.push(t.meta.file+":"+t.meta.line+":"+t.meta.column+" ("+t.meta.fn+")")),a.unshift(o.join("")),a}),A=T.console,P=T.setTimeout,S=T.clearTimeout,k=T.setInterval,O=T.clearInterval,_=T.setImmediate,F=T.clearImmediate,D=T.requestIdleCallback,N=T.cancelIdleCallback,R=T.requestAnimationFrame,j=T.cancelAnimationFrame,q=T.Promise,B=q.prototype,M=q,U={},V={};["all","race","reject","resolve"].forEach(function(e){U[e]=q[e]}),["then","catch","finally"].forEach(function(e){V[e]=B[e]});var Y=Object.freeze({console:A,setTimeout:P,clearTimeout:S,setInterval:k,clearInterval:O,setImmediate:_,clearImmediate:F,requestIdleCallback:D,cancelIdleCallback:N,requestAnimationFrame:R,cancelAnimationFrame:j,NativePromise:q,PromiseConstructor:M,PromiseStatic:U,PromisePrototype:V}),$=function(e){void 0===e&&(e={});var t=e.out,n=void 0===t?A:t,r=e.format,l=void 0===r?I:r;return function(e){if(null!==e){var t=o[6===e.level?y.info:e.level];n[t].apply(n,l(e))}}},z=function(e){void 0===e&&(e={});var t=e.out,a=void 0===t?A:t,n=e.format,u=void 0===n?x:n,i=a.log,c=(a.group,a.groupEnd,a.groupCollapsed,{}),s=[];return function n(e,t){if(null===e)return s.forEach(function(){a.groupEnd()}),void(s.length=0);var r=e.parent,l=s.length;if(!t||!e.printed){if(0<l){for(var o=l;o--&&s[o]!==r;)s[o].printed=!0,a.groupEnd();s.length=o+1}if(e.type===d.scope)"idle"===e.detail.state?(e.printed=!0,i.apply(a,u(e))):(s.push(e),a.group.apply(a,u(e)));else{if(!t&&r.printed&&"#root"!==r.label)return void(c[r.cid]||(c[r.cid]=P(function(){s.forEach(function(){a.groupEnd()}),s.length=0;for(var e=[],t=r;e.unshift(t),"#root"!==(t=t.parent).label;);e.forEach(function(e){a.group.apply(a,u(e))}),r.entries.forEach(function(e){n(e,!0)}),e.forEach(function(){a.groupEnd()})})));e.printed=!0,i.apply(a,u(e))}}}},G="undefined"!=typeof window?z:$,J=0;function K(e){return e&&e.hasOwnProperty("type")&&e.hasOwnProperty("level")}function H(e,t,n,r,l,o){return void 0===o&&(o=null),{cid:++J,ts:null,type:d.entry,level:e,badge:t,label:n,message:r,detail:l,meta:o,parent:null,entries:[]}}function Q(e){void 0===e&&(e=0);var t=Error.stackTraceLimit;Error.stackTraceLimit=e+1;var n=((new Error).stack||"").split("\n");return Error.stackTraceLimit=t,n.length<=e+1?null:s(n[e+1])}function W(o,a){return{add:function(e,t){var n,r=a.parent;if(n=K(e)?e:H(y.log,null,null,e,t),o.meta&&null===n.meta&&(n.meta=Q(3)),o.time&&(n.ts=C()),(n.parent=r).entries.push(n)>o.storeLast&&r.entries.splice(0,1),!0!==o.silent)for(var l=o.output.length;l--;)o.output[l](n);return n}}}function X(e,t,n,r,l,o,a){return void 0===o&&(o=null),void 0===a&&(a=null),{cid:++J,ts:C(),level:e,type:d.scope,badge:t,label:n,parent:null,message:r,detail:{info:l,state:a},meta:o,entries:[]}}var Z=null;function ee(){return Z}function te(e,t){if(null!==e){var n,r=Z,l=e.scope,o=e.scopeContext;return(Z=e).scope=t,e.scopeContext&&(n=e.scopeContext.parent,e.scopeContext.parent=t.scope()),{activeContext:r,ctx:e,scope:l,scopeContext:o,scopeContextParent:n}}Z=null}function ne(e){var t=e.ctx,n=e.scopeContext;t.scope=e.scope,(t.scopeContext=n)&&(n.parent=e.scopeContextParent),Z=e.activeContext}function re(s,f){null==s.silent&&(s.silent=!/^(about:|file:|https?:\/\/localhost\/)/.test(location+"")),null==s.time&&(s.time=!0),null==s.meta&&(s.meta=!1),null==s.storeLast&&(s.storeLast=1e3),null==s.output&&(s.output=[]);var t=X(y.info,"üöß","#root",null,null),p={logger:null,parent:t},n=W(s,p);p.logger=n;var r=f({createLogEntry:H,levels:y,logger:n});return["add","clear","scope","setup","getEntries","getLastEntry"].forEach(function(e){if(r.hasOwnProperty(e))throw new SyntaxError('[octologger] "'+e+'" is a reserved identifier')}),r.print=function(){!function n(e){e.printed=!1,e.entries.forEach(function(e){for(var t=s.output.length;t--;)e.printed=!1,s.output[t](e);e.type===d.scope&&n(e)})}(t);for(var e=s.output.length;e--;)s.output[e](null)},r.add=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.add(H(y.log,null,null,null,e))},r.clear=function(){return t.entries.splice(0,t.entries.length)},r.setup=function(e){for(var t in e)e.hasOwnProperty(t)&&(s[t]=e[t])},r.getEntries=function(){return t.entries},r.getLastEntry=function(){return t.entries[t.entries.length-1]||null},r.scope=function e(t,n,r){if(0===arguments.length)return this._scopeEntry;null==r&&"function"==typeof n&&(r=n,n=null);var l=K(t)?t:X(y.info,null,null,t,n,s.meta?Q(2):null);p.logger.add(l);var o=W(s,{parent:l}),a=f({createLogEntry:H,levels:y,logger:o});if(a.add=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return o.add(H(y.log,null,null,null,e))},a.scope=e,a._scopeEntry=l,"function"==typeof r){var u=Z,i=p.parent,c=p.logger;Z={entry:l,scope:a,logger:o,options:s,scopeContext:p},p.parent=l,r(a),Z=u,p.parent=i,p.logger=c}return a},r}var le={info:"‚ùï",warn:"‚ö†Ô∏è",error:"üõë",verbose:"üîé",debug:"‚ÅâÔ∏è",success:"‚úÖ"},oe=re({meta:!1,output:[G()]},function(e){var r=e.levels,l=e.logger;return Object.keys(r).reduce(function(e,n){return e[n]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];l.add(H(r[n],le[n]||null,null,null,e))},e},{})}),ae={fn:"<anonymous>",file:"",line:0,column:0};var ue={0:{level:y.info,badge:null,label:"success"},1:{level:y.warn,badge:"‚ö†Ô∏è",label:"cancelled"},2:{level:y.error,badge:"‚ùå",label:"failed"}};var ie={};function ce(o,a,e,r,t,l,u){var i="setInterval"===a||l,c=C(),n={pid:null,start:c,end:null,delay:e},s=o.options.meta?Q(3):null,f=o.scope.scope(X(y.verbose,"‚è≤",null,'Timer "'+a+'" started',n,s,v)),p=f.scope().detail,d=function(e){var t=p.state===b,n=+t+2*+(null!=e),r=ue[n],l=C();p.state=0===n?i?v:h:1===n?b:E,p.info.end=l,o.scopeContext.logger.add(H(r.level,r.badge,r.label,'Timer "'+a+'"'+(i?" step":"")+" "+(0===n?"completed successfully":1===n?b:E),{error:e,cancelled:t,start:c,duration:l-c},s)),c=l},m=t(function(e){var t=te(o,f),n=null;c=C(),p.state=g;try{if(l)r(e);else if(r.length&&u.length)switch(u.length){case 1:r(u[0]);break;case 2:r(u[0],u[1]);break;case 3:r(u[0],u[1],u[2]);break;case 4:r(u[0],u[1],u[2],u[3]);break;case 5:r(u[0],u[1],u[2],u[3],u[4]);break;default:r.apply(void 0,u)}else r()}catch(e){n=e,T.console.error(e)}d(n),ne(t)},e);return n.pid=m,ie[se(a,m)]={pid:m,resolve:d,ctx:o,detail:p,scope:f},m}function se(e,t){return("setTimeout"===e||"setInterval"===e?"timeout":e)+t}var fe=["Timeout","Interval","Immediate","AnimationFrame","IdleCallback"];function pe(l,o){fe.forEach(function(e){var t="AnimationFrame"===e||"IdleCallback"===e,n=(t?"request":"set")+e,r=(t?"cancel":"clear")+e;o(t,n,l[n],r,l[r])})}function de(e,o,a,u,t,n){e[a]=function(e,t){void 0===t&&(t=0);for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var l=ee();return null===l?o?u(e):u.apply(void 0,[e,t].concat(n)):ce(l,a,t,e,u,o,n)},e[t]=function(e){!function(e,t,n){n(e);var r=se(t,e),l=ie[r];if(void 0!==l){var o=te(l.ctx,l.scope);l.detail.state=b,l.resolve(null),ne(o),delete ie[r]}}(e,a,n)},p(e,a),p(e,t)}function me(o){pe(Y,function(e,t,n,r,l){o[t]===n&&de(o,e,t,n,r,l)})}function ve(o){pe(Y,function(e,t,n,r,l){o[t]=n,o[r]=l})}e.EntryTypes=d,e.STATE_OK="ok",e.STATE_IDLE=v,e.STATE_BUSY="BUSY",e.STATE_INTERACTIVE=g,e.STATE_PENDING="pending",e.STATE_COMPLETED=h,e.STATE_ABORTED="ABORTED",e.STATE_CANCELLED=b,e.STATE_FAILED=E,e.STATE_ERROR="error",e.STATE_RESOLVED="resolved",e.STATE_REJECTED="rejected",e.isLogEntry=K,e.createLogEntry=H,e.getMeta=Q,e.createScopeEntry=X,e.getLoggerContext=ee,e.switchLoggerContext=te,e.revertLoggerContext=ne,e.createLogger=re,e.octologger=oe,e.logger=oe,e.parseError=function(e){var t=r(e.stack),n=t[0]||ae;return{name:e.name,message:e.message,fn:n.fn,file:e.fileName||n.file,line:e.lineNumber||n.line,column:e.columnNumber||n.column,stack:t}},e.createFormat=m,e.nodeFromat=I,e.resetFormatStyle=w,e.browserFormat=x,e.nodeOutput=$,e.browserOutput=z,e.universalOutput=G,e.parseStackRow=s,e.parseStack=r,e.LogLevels=y,e.LogLevelsInvert=o,e.eachTimers=pe,e.patchTimers=me,e.revertPatchTimers=ve,e.patchPromise=function(e){},e.revertPatchPromise=function(e){},e.patchNativeAPI=function(e){me(e)},e.revertPatchNativeAPI=function(e){ve(e)},Object.defineProperty(e,"__esModule",{value:!0})});
